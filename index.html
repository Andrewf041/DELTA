<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DELTA</title>

<style>
:root{
  --bg:#0b0f0d;
  --panel:#121816;
  --user:#1f2925;
  --delta:#151c19;
  --accent:#10a37f;
  --text:#e6f2ee;
}
*{box-sizing:border-box}
body{
  margin:0;
  min-height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,Arial;
  display:flex;
  flex-direction:column;
}
header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:10px 12px;
  border-bottom:1px solid #1f2a25;
}
.logo{width:30px;height:30px}
#tabs{display:flex;gap:6px;overflow-x:auto;flex:1}
.tab{
  padding:5px 8px;
  border-radius:8px;
  border:1px solid #1f2a25;
  font-size:13px;
  opacity:.6;
}
.tab.active{
  background:var(--accent);
  color:#000;
  opacity:1;
}
header button{
  background:var(--accent);
  border:none;
  border-radius:10px;
  padding:6px 10px;
  cursor:pointer;
}
#chat{
  flex:1;
  overflow-y:auto;
  padding:12px;
  display:flex;
  flex-direction:column;
  gap:12px;
}
.msg{max-width:85%;display:flex;flex-direction:column}
.msg.user{align-self:flex-end}
.msg.delta{align-self:flex-start}
.bubble{
  padding:12px 14px;
  border-radius:14px;
  background:var(--panel);
  font-size:15px;
}
.user .bubble{background:var(--user)}
.time{font-size:10px;opacity:.5;margin-top:3px}

.file{
  margin-top:6px;
  font-size:14px;
}
.file img{
  max-width:220px;
  border-radius:10px;
}
.file video{
  max-width:220px;
  border-radius:10px;
}

footer{
  position:sticky;
  bottom:0;
  padding:8px;
  border-top:1px solid #1f2a25;
  display:flex;
  gap:6px;
  background:var(--bg);
}
input[type=text]{
  flex:1;
  padding:12px;
  border-radius:12px;
  border:none;
  background:var(--panel);
  color:var(--text);
}
button.send{
  background:var(--accent);
  border:none;
  border-radius:12px;
  padding:12px 14px;
}
input[type=file]{display:none}
</style>
</head>

<body>

<header>
  <svg class="logo" viewBox="0 0 100 100">
    <polygon points="50,5 95,90 5,90" fill="none" stroke="#10a37f" stroke-width="6"/>
    <polygon points="50,30 72,70 28,70" fill="#10a37f"/>
  </svg>
  <strong>DELTA</strong>
  <div id="tabs"></div>
  <button onclick="newChat()">Ôºã</button>
</header>

<div id="chat"></div>

<footer>
  <label>üìé
    <input type="file" id="file" multiple>
  </label>
  <input id="input" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶">
  <button class="send" onclick="send()">‚û§</button>
</footer>

<script>
const chat = document.getElementById("chat");
const input = document.getElementById("input");
const tabs = document.getElementById("tabs");
const fileInput = document.getElementById("file");

let chats = JSON.parse(localStorage.getItem("delta_chats")) || {};
let active = localStorage.getItem("delta_active");
let context = {};

function save(){
  localStorage.setItem("delta_chats",JSON.stringify(chats));
  localStorage.setItem("delta_active",active);
}
function time(){
  return new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
}

function newChat(){
  const id="chat_"+Date.now();
  chats[id]=[];
  active=id;
  save(); renderTabs(); render();
}

function renderTabs(){
  tabs.innerHTML="";
  Object.keys(chats).forEach(id=>{
    const t=document.createElement("div");
    t.className="tab"+(id===active?" active":"");
    t.textContent="–ß–∞—Ç";
    t.onclick=()=>{active=id;save();renderTabs();render();}
    tabs.appendChild(t);
  });
}

function render(){
  chat.innerHTML="";
  (chats[active]||[]).forEach(m=>{
    const d=document.createElement("div");
    d.className="msg "+m.role;
    d.innerHTML=`<div class="bubble">${m.text || ""}</div>`;
    if(m.file) d.querySelector(".bubble").appendChild(m.file);
    d.innerHTML+=`<div class="time">${m.time}</div>`;
    chat.appendChild(d);
  });
  chat.scrollTop=chat.scrollHeight;
}

function add(role,text,file=null){
  chats[active].push({role,text,time:time(),file});
  save(); render();
}

function send(){
  const t=input.value.trim();
  if(!t) return;
  input.value="";
  add("user",t);
  setTimeout(()=>respond(t),300);
}

/* ===== –õ–û–ì–ò–ö–ê ===== */
function respond(text){
  let r="–Ø —Ç–µ–±—è –ø–æ–Ω—è–ª. –ü—Ä–æ–¥–æ–ª–∂–∞–π.";
  if(/–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤/.test(text.toLowerCase())) r="–ü—Ä–∏–≤–µ—Ç. –Ø –∑–¥–µ—Å—å.";
  if(/–∫–∞–∫ –¥–µ–ª–∞/.test(text.toLowerCase())) r="–í –ø–æ—Ä—è–¥–∫–µ. –ì–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å —Ä–∞–∑–≥–æ–≤–æ—Ä.";
  if(/–∫—Ç–æ —Ç—ã/.test(text.toLowerCase())) r="–Ø DELTA ‚Äî –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫.";
  add("delta",r);
}

/* ===== –§–ê–ô–õ–´ ===== */
fileInput.onchange=e=>{
  [...e.target.files].forEach(f=>{
    const wrap=document.createElement("div");
    wrap.className="file";

    if(f.type.startsWith("image/")){
      const img=document.createElement("img");
      img.src=URL.createObjectURL(f);
      wrap.appendChild(img);
      add("user","",wrap);
      add("delta","–Ø –ø–æ–ª—É—á–∏–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ. –ü–æ–∫–∞ –Ω–µ —É–º–µ—é –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ.");
    }
    else if(f.type.startsWith("video/")){
      const v=document.createElement("video");
      v.src=URL.createObjectURL(f);
      v.controls=true;
      wrap.appendChild(v);
      add("user","",wrap);
      add("delta","–Ø –ø–æ–ª—É—á–∏–ª –≤–∏–¥–µ–æ—Ñ–∞–π–ª.");
    }
    else{
      wrap.textContent="üìÑ "+f.name;
      add("user","",wrap);
      add("delta","–Ø –ø–æ–ª—É—á–∏–ª –¥–æ–∫—É–º–µ–Ω—Ç. –ü–æ–∫–∞ –º–æ–≥—É —Ç–æ–ª—å–∫–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –µ–≥–æ.");
    }
  });
  fileInput.value="";
};

if(!active) newChat();
renderTabs(); render();
</script>

</body>
</html>












