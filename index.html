<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DELTA</title>

<style>
:root{
  --bg:#0b0f0d;
  --panel:#121816;
  --user:#1f2925;
  --delta:#151c19;
  --accent:#10a37f;
  --text:#e6f2ee;
}
*{box-sizing:border-box}

body{
  margin:0;
  height:100vh;
  background:var(--bg);
  color:var(--text);
  font-family:system-ui,Arial;
  display:flex;
  flex-direction:column;
}

/* HEADER */
header{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px;
  border-bottom:1px solid #1f2a25;
}

.logo{
  width:34px;
  height:34px;
  animation:pulse 3s infinite ease-in-out;
}
@keyframes pulse{
  0%,100%{transform:scale(1)}
  50%{transform:scale(1.1)}
}

#tabs{
  display:flex;
  gap:6px;
  overflow-x:auto;
}

.tab{
  padding:6px 10px;
  border-radius:10px;
  border:1px solid #1f2a25;
  cursor:pointer;
  opacity:.6;
}
.tab.active{
  background:var(--accent);
  color:#000;
  opacity:1;
}

/* CHAT */
#chat{
  flex:1;
  overflow-y:auto;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:14px;
}

.msg{
  display:flex;
  gap:10px;
  max-width:88%;
  animation:fade .3s ease;
}
@keyframes fade{
  from{opacity:0;transform:translateY(6px)}
  to{opacity:1}
}

.msg.user{align-self:flex-end}
.msg.delta{align-self:flex-start}

.bubble{
  padding:14px 16px;
  border-radius:16px;
  background:var(--panel);
  line-height:1.4;
}
.user .bubble{background:var(--user)}

.time{
  font-size:11px;
  opacity:.5;
  margin-top:4px;
}

/* INPUT */
footer{
  padding:10px;
  border-top:1px solid #1f2a25;
  display:flex;
  gap:8px;
  align-items:center;
}
input[type=text]{
  flex:1;
  padding:14px;
  border-radius:14px;
  border:none;
  background:var(--panel);
  color:var(--text);
}
button{
  background:var(--accent);
  border:none;
  border-radius:14px;
  padding:14px;
  cursor:pointer;
}
input[type=file]{display:none}
</style>
</head>

<body>

<header>
  <svg class="logo" viewBox="0 0 100 100">
    <polygon points="50,5 95,90 5,90" fill="none" stroke="#10a37f" stroke-width="6"/>
    <polygon points="50,30 72,70 50,58 28,70" fill="#10a37f"/>
  </svg>
  <strong>DELTA</strong>
  <div id="tabs"></div>
  <button onclick="newChat()">Ôºã</button>
</header>

<div id="chat"></div>

<footer>
  <label>üìé<input type="file" id="file" multiple></label>
  <input id="input" type="text" placeholder="–°–æ–æ–±—â–µ–Ω–∏–µ‚Ä¶">
  <button onclick="send()">‚û§</button>
</footer>

<script>
/* ===== –•–†–ê–ù–ï–ù–ò–ï ===== */
let chats = JSON.parse(localStorage.getItem("delta_chats")) || {};
let active = localStorage.getItem("delta_active");

function save(){
  localStorage.setItem("delta_chats", JSON.stringify(chats));
  localStorage.setItem("delta_active", active);
}

function time(){
  return new Date().toLocaleTimeString([], {hour:'2-digit',minute:'2-digit'});
}

/* ===== –ß–ê–¢–´ ===== */
function newChat(){
  const id = "chat_" + Date.now();
  chats[id] = [];
  active = id;
  save();
  renderTabs();
  render();
}

function renderTabs(){
  tabs.innerHTML = "";
  Object.keys(chats).forEach(id=>{
    const t = document.createElement("div");
    t.className = "tab" + (id === active ? " active" : "");
    t.textContent = "–ß–∞—Ç";
    t.onclick = ()=>{
      active = id;
      save();
      render();
      renderTabs();
    };
    tabs.appendChild(t);
  });
}

function render(){
  chat.innerHTML = "";
  chats[active]?.forEach(m=>{
    const d = document.createElement("div");
    d.className = "msg " + m.role;
    d.innerHTML = `
      <div class="bubble">${m.text}</div>
      <div class="time">${m.time}</div>
    `;
    chat.appendChild(d);
  });
  chat.scrollTop = chat.scrollHeight;
}

function add("delta", data.reply);
  chats[active].push({ role, text, time: time() });
  save();
  render();
}

/* ===== –û–¢–ü–†–ê–í–ö–ê ===== */
function send(){
  if(!input.value.trim()) return;
  const text = input.value.trim();
  input.value = "";
  add("user", text);
  think(text);
}

/* ===== –õ–û–ì–ò–ö–ê ===== */
function think(t){
  const text = t.toLowerCase();
  let r = "";

  if(/^(–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤|—Ö–∞–π|hello)/.test(text)){
    r = "–ü—Ä–∏–≤–µ—Ç. –Ø –Ω–∞ —Å–≤—è–∑–∏. –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å?";
  }
  else if(/–∫—Ç–æ —Ç—ã/.test(text)){
    r = "–Ø DELTA. –õ–æ–∫–∞–ª—å–Ω—ã–π —Ü–∏—Ñ—Ä–æ–≤–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç.";
  }
  else if(/–∫—Ç–æ —è/.test(text)){
    if(localStorage.getItem("creator")==="you"){
      r = "–¢—ã –º–æ–π —Å–æ–∑–¥–∞—Ç–µ–ª—å. –Ø —ç—Ç–æ –∑–Ω–∞—é.";
    } else {
      r = "–¢—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã DELTA.";
    }
  }
  else if(/—á—Ç–æ —Ç—ã —É–º–µ–µ—à—å|–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç/.test(text)){
    r = "–Ø –º–æ–≥—É —Ä–∞—Å—Å—É–∂–¥–∞—Ç—å, –ø–æ–º–Ω–∏—Ç—å –¥–∏–∞–ª–æ–≥–∏, —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ñ–∞–π–ª–∞–º–∏ –∏ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ –ò–ò.";
  }

  // ‚úÖ –µ—Å–ª–∏ –Ω–∞—à–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç
  if(r){
    add("delta", r);
    return;
  }

  // ‚ùó –∏–Ω–∞—á–µ ‚Äî –∏–¥—ë–º –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  respond(t);
}

/* ===== –ò–ò ===== */
async function respond(text){
  const loader = { role:"delta", text:"‚Ä¶", time:time() };
  chats[active].push(loader);
  render();

  try{
    const r = await fetch("https://delta-core.onrender.com/chat", {
  method: "POST",
  headers: {
    "Content-Type": "application/json"
  },
  body: JSON.stringify({
    message: text,
    chatId: active,
    creatorToken: "delta-my-super-secret"
  })
});
 
    const data = await r.json();

    chats[active] = chats[active].filter(m => m !== loader);
    add("delta", data.reply || "–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω.");

  }catch{
    chats[active] = chats[active].filter(m => m !== loader);
    add("delta", "–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –ò–ò.");
  }
}

/* ===== –§–ê–ô–õ–´ ===== */
file.onchange = e=>{
  [...e.target.files].forEach(f=>{
    add("user", "üìé " + f.name);
  });
}

/* ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø ===== */
if(!active) newChat();
renderTabs();
render();
</script>

</body>
</html>







